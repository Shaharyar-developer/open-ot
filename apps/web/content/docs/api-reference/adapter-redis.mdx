---
title: Adapter Redis API
description: Autogenerated API reference for the `@open-ot/adapter-redis` package.
---

# RedisAdapter

### Constructor


```ts twoslash
import { RedisAdapter } from "@open-ot/adapter-redis";
// ---cut---
const instance = new RedisAdapter("");
//                      ^?
```
**Parameters:**
- `connectionString: string`

### Methods

#### `getRecord(docId)`

Get the current global revision and type of the document

```ts twoslash
import { RedisAdapter } from "@open-ot/adapter-redis";
// ---cut---
const api = new RedisAdapter("");
api.getRecord("");
// ^?
```

**Parameters:**
- `docId: string`

**Returns:** `Promise<DocumentRecord>`

#### `getHistory(docId, start, end)`

Get a range of past operations for transformation

```ts twoslash
import { RedisAdapter } from "@open-ot/adapter-redis";
// ---cut---
const api = new RedisAdapter("");
api.getHistory("", 0, 0);
// ^?
```

**Parameters:**
- `docId: string`
- `start: number`
- `end: number | undefined`

**Returns:** `Promise<unknown[]>`

#### `saveOperation(docId, op, newRevision)`

Atomic commit: Add op to history AND increment revision

```ts twoslash
import { RedisAdapter } from "@open-ot/adapter-redis";
// ---cut---
const api = new RedisAdapter("");
api.saveOperation("", undefined as any, 0);
// ^?
```

**Parameters:**
- `docId: string`
- `op: unknown`
- `newRevision: number`

**Returns:** `Promise<void>`

#### `publish(channel, message)`

Publish a message to a channel

```ts twoslash
import { RedisAdapter } from "@open-ot/adapter-redis";
// ---cut---
const api = new RedisAdapter("");
api.publish("", "");
// ^?
```

**Parameters:**
- `channel: string`
- `message: string`

**Returns:** `Promise<void>`

#### `subscribe(channel, onMessage)`

Subscribe to a channel

```ts twoslash
import { RedisAdapter } from "@open-ot/adapter-redis";
// ---cut---
const api = new RedisAdapter("");
api.subscribe("", () => {});
// ^?
```

**Parameters:**
- `channel: string`
- `onMessage: (msg: string) => void`

**Returns:** `Promise<() => void>`

#### `createDocument(docId, type, initialSnapshot)`

Helper to create a document (for testing/initialization)

```ts twoslash
import { RedisAdapter } from "@open-ot/adapter-redis";
// ---cut---
const api = new RedisAdapter("");
api.createDocument("", "", undefined as any);
// ^?
```

**Parameters:**
- `docId: string`
- `type: string`
- `initialSnapshot: unknown`

**Returns:** `Promise<void>`

#### `close()`

```ts twoslash
import { RedisAdapter } from "@open-ot/adapter-redis";
// ---cut---
const api = new RedisAdapter("");
api.close();
// ^?
```

**Returns:** `Promise<void>`


